DROP TABLE CERTIFY
CASCADE CONSTRAINTS;

DROP SEQUENCE CERT_SEQ;

CREATE TABLE CERTIFY(
		CERTIFYSEQ NUMBER CONSTRAINT CERT_PRI PRIMARY KEY, 
		CERTIFYPHOTO VARCHAR2(100), 
		CERTIFYPHOTONAME VARCHAR2(100),
		CERTIFYDATE DATE,
		EMAIL VARCHAR2(50),
		CHALLENGESEQ NUMBER,
		CONSTRAINT FK_CERT1 FOREIGN KEY(EMAIL) 
        REFERENCES MEMBER(EMAIL),
        CONSTRAINT FK_CERT2 FOREIGN KEY(CHALLENGESEQ) 
        REFERENCES CHALLENGE(CHALLENGESEQ)
)


CREATE SEQUENCE CERT_SEQ
START WITH 100
INCREMENT BY 1

SELECT * FROM CERTIFY
SELECT SYSDATE, SYSTIMESTAMP FROM DUAL
select DBTIMEZONE, SESSIONTIMEZONE FROM DUAL
SELECT CURRENT_DATE, CURRENT_TIMESTAMP, LOCALTIMESTAMP FROM DUAL ;

SELECT * FROM CHALLENGE
SELECT * FROM CERTIFY
SELECT CERTIFYSEQ, CERTIFYPHOTO, CERTIFYPHOTONAME, CERTIFYDATE, EMAIL, CHALLENGESEQ, 
(SELECT COUNT(*)
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	AND CERTIFYDATE >= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')
	AND CERTIFYDATE <= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(300/86400)) AS CERTIFYCHECK
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	
(SELECT COUNT(*)
FROM CERTIFY
WHERE CERTIFYDATE >= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')
	AND CERTIFYDATE <= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(300/86400)) AS CERTIFYCHECK
FROM DUAL
SELECT
TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24'),
TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(17400/86400)
FROM DUAL

SELECT (SELECT COUNT(*)
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	AND CHALLENGESEQ = 1140) AS USERIDENTIFY, (SELECT IDENTIFYTIME*14 FROM CHALLENGE)  AS TOTALDAY

COUNT(이름) OVER(PARTITION BY 종목) as 수량

SELECT ROW_NUMBER()OVER(PARTITION BY EMAIL ORDER BY CERTIFYDATE DESC) AS RNUM, CO
FROM CERTIFY

SELECT CERTIFYSEQ
FROM CERTIFY
GROUP BY EMAIL

INSERT INTO CERTIFY(CERTIFYSEQ, CERTIFYPHOTO, CERTIFYPHOTONAME, CERTIFYDATE, EMAIL, CHALLENGESEQ)
VALUES(CERT_SEQ.NEXTVAL, '0', '0', CURRENT_DATE, 'dlalstjs0226@naver.com', 1140)

'dlalstjs0226@naver.com'


SELECT ROW_NUMBER()OVER(PARTITION BY )COUNT(*), EMAIL
FROM CERTIFY
WHERE EMAIL = 'dlalstjs0226@naver.com'
	AND CHALLENGESEQ = 1140
GROUP BY EMAIL

--해당 

SELECT * FROM CERTIFY
SELECT * FROM MEMBER
SELECT COUNT(*)
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	AND CHALLENGESEQ = 1140
SELECT M.EMAIL, M.NICKNAME, M.MEMBERPHOTONAME, (C.IDENTIFYTIME*14) AS TOTALIDENTIFYDAY, C.*, I.*
FROM CHALLENGE C, MEMBER M, CERTIFY I
WHERE C.CHALLENGESEQ = I.CHALLENGESEQ
		AND I.EMAIL = M.EMAIL
			AND M.EMAIL = 'final.5623@gmail.com'
				AND CHALLENGESEQ = 1140
		




SELECT CHALLENGEPERIOD AS TOTALDAY
FROM CHALLENGE