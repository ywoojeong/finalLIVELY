DROP TABLE CERTIFY
CASCADE CONSTRAINTS;

DROP SEQUENCE CERT_SEQ;

CREATE TABLE CERTIFY(
		CERTIFYSEQ NUMBER CONSTRAINT CERT_PRI PRIMARY KEY, 
		CERTIFYPHOTO VARCHAR2(100), 
		CERTIFYPHOTONAME VARCHAR2(100),
		CERTIFYDATE DATE,
		EMAIL VARCHAR2(50),
		CHALLENGESEQ NUMBER,
		CONSTRAINT FK_CERT1 FOREIGN KEY(EMAIL) 
        REFERENCES MEMBER(EMAIL),
        CONSTRAINT FK_CERT2 FOREIGN KEY(CHALLENGESEQ) 
        REFERENCES CHALLENGE(CHALLENGESEQ)
)


CREATE SEQUENCE CERT_SEQ
START WITH 100
INCREMENT BY 1

SELECT * FROM CERTIFY
SELECT SYSDATE, SYSTIMESTAMP FROM DUAL
select DBTIMEZONE, SESSIONTIMEZONE FROM DUAL
SELECT CURRENT_DATE, CURRENT_TIMESTAMP, LOCALTIMESTAMP FROM DUAL ;


SELECT * FROM CERTIFY
SELECT CERTIFYSEQ, CERTIFYPHOTO, CERTIFYPHOTONAME, CERTIFYDATE, EMAIL, CHALLENGESEQ, 
(SELECT COUNT(*)
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	AND CERTIFYDATE >= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')
	AND CERTIFYDATE <= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(300/86400)) AS CERTIFYCHECK
FROM CERTIFY
WHERE EMAIL = 'final.5623@gmail.com'
	
(SELECT COUNT(*)
FROM CERTIFY
WHERE CERTIFYDATE >= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')
	AND CERTIFYDATE <= TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(300/86400)) AS CERTIFYCHECK
FROM DUAL
SELECT
TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24'),
TO_DATE(TO_CHAR(CURRENT_DATE, 'YYYY-MM-DD HH24'), 'YYYY-MM-DD HH24')+(17400/86400)
FROM DUAL