DROP TABLE MEMBER
CASCADE CONSTRAINTS;

DROP SEQUENCE MEM_SEQ;
--MEMBER

CREATE TABLE MEMBER(
		MEMBERSEQ NUMBER,
		EMAIL VARCHAR2(50) CONSTRAINT MEM_PRI PRIMARY KEY, 
		NICKNAME VARCHAR2(50),
		MEMBERPHOTO VARCHAR2(200),
		MEMBERPHOTONAME VARCHAR2(100),
		NAVERLOGIN VARCHAR2(50),
		KAKAOLOGIN VARCHAR2(50),
		GOOGLELOGIN VARCHAR2(50),
		AUTH NUMBER,
		MEMBERDEL NUMBER,
		MEMBERSTOP NUMBER,
		POINT NUMBER, 
		MEMBERSDATE DATE
)
-- 관리자 1, 멤버 3
-- MEMBERSTOP 사용 1, 정지 2

ALTER TABLE MEMBER

ALTER TABLE MEMBER MODIFY(EMAIL VARCHAR2(50))
ALTER TABLE MEMBER ADD(POINT NUMBER)

ALTER TABLE MEMBER ADD(MEMBERPHOTONAME VARCHAR2(200))
ALTER TABLE MEMBER ADD(MEMBERSDATE DATE)

UPDATE MEMBER 
SET MEMBERPHOTONAME=MEMBERPHOTO
WHERE EMAIL = 'ywoo0309@gmail.com'

SELECT * FROM MEMBER

DELETE FROM MEMBER
WHERE EMAIL = 'jyw030809@naver.com'

COMMIT

CREATE SEQUENCE MEM_SEQ
START WITH 1
INCREMENT BY 1

INSERT INTO MEMBER (MEMBERSEQ, EMAIL, NICKNAME, MEMBERPHOTO, MEMBERPHOTONAME, NAVERLOGIN, KAKAOLOGIN, GOOGLELOGIN, AUTH, MEMBERDEL, MEMBERSTOP, POINT)
VALUES(MEM_SEQ.NEXTVAL, 'admin', '매니저', '0', '00', null, null, null, 1, 0, 1, 0);



SELECT SV.* FROM
	(SELECT CHA.*, ROW_NUMBER() OVER(ORDER BY CHALLENGESEQ DESC) as SI,
	(SELECT COUNT(*) FROM CHALLENGE
	WHERE  CHALLENGEDEL = 0
	) as TOTALCNT
	FROM CHALLENGE CHA
	WHERE CHALLENGEDEL = 0
	    <if test="category !=null and category !='' and category !=0">
			AND CATEGORY = #{category}
		</if>
		<if test="mSearch !=null and mSearch != ''">
			AND CHALLENGETITLE LIKE '%'||#{mSearch}||'%'
		</if>
		<if test="datestart !=null and datestart !='' and datestart !=0">
		AND CHALLENGESTART > #{datestart}
		</if>
		<if test="dateend !=null and dateend !='' and dateend !=0">
		AND #{dateend} > CHALLENGEEND
		</if>
	) SV
	WHERE SV.SI > #{startPage} AND #{endPage} > SV.SI
	
	
	
	
select * from member